!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.ext=e()}}(function(){var e;return function n(e,t,o){function r(s,a){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[s]={exports:{}};e[s][0].call(l.exports,function(n){var t=e[s][1][n];return r(t?t:n)},l,l.exports,n,e,t,o)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,n){var t=e("gardr-ext"),o=e("gardr-plugin-host-resize"),r=e("gardr-plugin-host-postscribe");t.plugin(o),t.plugin(r),t({allowedDomains:["localhost","aftenposten.no"]}),n.exports=t},{"gardr-ext":4,"gardr-plugin-host-postscribe":18,"gardr-plugin-host-resize":21}],2:[function(e,n){"use strict";function t(e){return Array.prototype.slice.call(e)}function o(e){return t(e).filter(function(e){var n=i(e,"position");return e._rect=e.getBoundingClientRect(),-1===a.indexOf(n)&&!(0===e._rect.width&&0===e._rect.height)})}function r(e){return e?(u=null,o(e.children).forEach(function(e){c(e)}),{width:u?u.right-u.left:0,height:u?u.bottom-u.top:0}):void 0}var i=e("computed-style"),s=["scroll","hidden","auto","overlay"],a=["absolute","fixed"],u=null,c=function(e){var n=o(e.children),t=i(e,"overflow");null===u&&(u={top:e._rect.top,right:e._rect.right,bottom:e._rect.bottom,left:e._rect.left}),u.top=Math.min(u.top,e._rect.top),u.right=Math.max(u.right,e._rect.right),u.bottom=Math.max(u.bottom,e._rect.bottom),u.left=Math.min(u.left,e._rect.left),-1===s.indexOf(t)&&n.forEach(function(e){c(e)})};n.exports=r},{"computed-style":10}],3:[function(e,n){function t(e,n,t){r.sendTo(n,"rendered",i(t||{},{id:e}))}function o(e,n,o){if("object"!=typeof n||!window.postMessage)throw new Error("targetWindow must be a Window object");if("string"!=typeof o)throw new Error("origin must be a string");return r.targetOrigin=o,{rendered:t.bind(null,e,n)}}var r=e("cross-domain-events"),i=e("util-extend");o._setXde=function(e){r=e},n.exports=o},{"cross-domain-events":11,"util-extend":17}],4:[function(e,n){(function(t){function o(e){if(!h.test(e))throw new Error("allowedDomains should only contain the hostname. Invalid domain: "+e)}function r(e){var n=decodeURIComponent(document.location.href.split("#")[1]),t=JSON.parse(n||window.name);return i(e,t),t}function i(e,n){var t=document.createElement("a");if(t.href=n.url,-1===t.protocol.indexOf("http"))throw new Error("url protocol is "+t.protocol.replace(":","")+", but have to be http/https");var o=!t.hostname||t.hostname==location.hostname;if(!o&&-1==e.indexOf(t.hostname))throw new Error("Script "+n.url+" is not on a allowed domain.")}function s(e){w(e),e.allowedDomains.forEach(o)}var a=e("./comClient.js"),u=e("./log/getAppender.js"),c=e("./log/logger.js"),l=e("eventlistener"),f=e("./childrensize.js"),d=e("gardr-core-plugin"),p=e("define-options"),g=e("util-extend"),m={allowedDomains:[]},h=/^[a-zA-Z0-9.-]+$/,w=p({allowedDomains:"?|string[] - Required array with allowed domains"}),v=function(e){e=g(g({},m),e),s(e);var n=t.gardr={},o=new d.PluginApi;n.params=r(e.allowedDomains),d.pluginHandler.initPlugins(o,e),o.trigger("params:parsed",n.params),n.id=n.params.id,n.log=c.create(n.id,n.params.loglevel,u(n.params.logto)),n.log.debug("Loading url: "+n.params.url),document.write(['<span id="gardr"><scr','ipt src="',n.params.url,'" ></scr',"ipt></span>"].join("")),n.container=document.getElementById("gardr"),o.trigger("element:containercreated",n.container);var i=a(n.id,window.parent,n.params.origin);l.add(t,"load",function(){setTimeout(function(){var e=f(n.container);o.trigger("banner:rendered",e),i.rendered(e)},0)})};v._setComClient=function(e){a=e},v.plugin=function(e){d.pluginHandler.register(e)},n.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./childrensize.js":2,"./comClient.js":3,"./log/getAppender.js":7,"./log/logger.js":8,"define-options":12,eventlistener:13,"gardr-core-plugin":15,"util-extend":17}],5:[function(e,n){function t(){document.body?document.body.appendChild(c):setTimeout(t,0)}function o(){var e=[["{","position:absolute","top:0","left:0","width:100%","height:100%","overflow:scroll","padding:10px","opacity:0.8","background-color:black","color:white","font-family:monospace","font-weight:bold","font-size:10px","z-index:9999","white-space:nowrap","border:5px solid transparent","box-sizing:border-box","background-clip:padding-box","border-radius:10px","}"].join(";"),".info {color:blue}",".warn {color:orange}",".error {color:red}"].map(function(e){return["#",f," ",e].join("")});u(e.join("\n"))}function r(){var e=document.createElement("div");return e.id=f,e}function i(e){var n=d[e.level],t=e.url&&e.line,o=['<span class="'+n.toLowerCase()+'">','<span class="time">',e.time-l," ms</span>",d[e.level],e.msg];return t&&o.push.call(o,'<a href="'+e.url+'" target="_blank" class="script">',e.url+":"+e.line,"</a>"),o.push("</span>"),o.join(" ")}function s(e){clearTimeout(p),g=g||document.createDocumentFragment(),g.appendChild(e),p=setTimeout(function(){c.appendChild(g),g=null},50)}function a(e){c||(c=r(),u(o()),t());var n=document.createElement("div");n.innerHTML=i(e),s(n)}var u=e("../../style/insertCss.js"),c=null,l=(new Date).getTime(),f="logoutput",d={1:"ERROR",2:"WARN",3:"INFO",4:"DEBUG"},p=null,g=null;a.reset=function(){clearTimeout(p),c&&(c.parentElement&&c.parentElement.removeChild(c),c=null),g&&(g=null)},n.exports=a},{"../../style/insertCss.js":9}],6:[function(e,n){(function(e){function t(n){var t=o[n.level],r=[n.name,n.time,t,n.msg].join(" ");e.console.log(r)}var o={1:"ERROR",2:"WARN",3:"INFO",4:"DEBUG"};n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,n){var t=e("./appender/console.js"),o=e("./appender/banner.js");n.exports=function(e){return"console"===e?t:o}},{"./appender/banner.js":5,"./appender/console.js":6}],8:[function(e,n){function t(e){return e.name||(c.test(e.toString())?RegExp.$1:"{anonymous}")}function o(e,n){return function(t){return function(o){"string"==typeof o&&(o={msg:o}),e(s({level:t,name:n,time:(new Date).getTime()},o))}}}function r(e,n){var o={msg:e.message,url:e.filename,line:e.lineno,stack:[]};try{for(var r=u;n&&r--;)o.stack.push(t(n)),n=n.caller}catch(i){}return o}function i(e,n,t){var i=parseInt(n||"0",10),s=o(t,e),u=function(){},c={level:i,error:i>=1?s(1):u,warn:i>=2?s(2):u,info:i>=3?s(3):u,debug:i>=4?s(4):u};return i>0&&a.add(window,"error",function(e){var n=arguments.callee&&arguments.callee.caller;c.error(r(e,n))},!1),c}var s=e("util-extend"),a=e("eventlistener"),u=10,c=/function ([\w\d\-_]+)\s*\(/;n.exports={create:i}},{eventlistener:13,"util-extend":17}],9:[function(e,n){n.exports=function(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),n.appendChild(t)}},{}],10:[function(e,n){var t=function(e,n,t){return t=window.getComputedStyle,(t?t(e):e.currentStyle)[n.replace(/-(\w)/gi,function(e,n){return n.toUpperCase()})]};n.exports=t},{}],11:[function(e,n,t){!function(e,o){function r(e){var n;if(a.targetOrigin==l||e.origin===a.targetOrigin){if(n=e.data,"string"==typeof e.data)try{n=JSON.parse(e.data)}catch(t){}if(n&&n.__xde===!0){n.origin=e.origin,n.source=e.source;var o=u[n.name];o&&o.length>0&&o.forEach(function(e){e(n)})}}}function i(e){if(!e||"string"!=typeof e)throw new Error("Event name has to be a string")}function s(e,n){if(i(e),"function"!=typeof n)throw new Error("Callback function has to be given")}var a,u,c,l="*";a={on:function(e,n){s(e,n),"undefined"==typeof u[e]&&(u[e]=[]),u[e].push(n)},off:function(e,n){s(e,n);var t=u[e];t&&(u[e]=t.filter(function(e){return e!==n}))},sendTo:function(e,n,t){i(n);try{e&&e.contentWindow&&(e=e.contentWindow)}catch(o){}if(!e||!e.postMessage)throw new TypeError("otherWindow does not support postMessage");var r={name:n,data:t,__xde:!0};c&&(r=JSON.stringify(r)),e.postMessage(r,this.targetOrigin)},targetOrigin:l,_reset:function(n){u={},this.targetOrigin=l,c=n||!1;try{e.postMessage({toString:function(){c=!0}},"*")}catch(t){}}},a._reset(),o.add(window,"message",r,!1),"object"==typeof t?n.exports=a:e.xde=a}(this,this.eventListener||e("eventlistener"))},{eventlistener:13}],12:[function(e,n){var t={array:function(e){return Array.isArray(e)},"boolean":function(e){return"boolean"==typeof e||e instanceof Boolean},"function":function(e){return"function"==typeof e},number:function(e){return!isNaN(e)&&("number"==typeof e||e instanceof Number)},object:function(e){return"object"==typeof e},string:function(e){return"string"==typeof e||e instanceof String},"?":function(e){return null==e},"*":function(){return!0}},o=/[a-z]+\[\]$/,r=/\s*-\s*/;n.exports=function(e){return Object.keys(e).forEach(function(n){var o=e[n].split(r)[0];o.split("|").forEach(function(e){if(!(e.replace("[]","")in t))throw new Error("Invalid type: '"+e+"'")})}),function(n){function i(t){var o=e[t].split(r);s(t,n[t],o[0],o[1])}function s(e,n,r,i){i=i?". DOC: "+i:"";var s=r.split("|").some(function(e){return o.test(e)?(e=e.replace("[]",""),t.array(n)&&n.every(function(n){return t[e](n)})):t[e](n)});if(!s){if(null==n)throw new TypeError(e+" is required. Valid types: "+r+i);throw new TypeError(e+" has to be of type "+r+" but was "+typeof n+i)}}var a=Object.keys(e);n=n||{},a.forEach(i)}}},{}],13:[function(n,t,o){!function(n,r){"function"==typeof e&&e.amd?e(r):"object"==typeof o?t.exports=r():n.eventListener=r()}(this,function(){function e(e,n){return function(t,o,r,i){t[e]?t[e](o,r,i):t[n]&&t[n]("on"+o,r)}}return{add:e("addEventListener","attachEvent"),remove:e("removeEventListener","detachEvent")}})},{}],14:[function(e,n){function t(e,n){return s[e]?s[e][n]:void 0}function o(e,n,t){s[e]=s[e]||{},s[e][n]=t}function r(e,n,o){if("number"!=typeof e&&"string"!=typeof n&&"function"!=typeof o)throw new Error("Invalid arguments");var r=t(e,"listeners");r[n]||(r[n]=[]),r[n].push(o)}function i(e,n){var o=t(e,"listeners")[n],r=Array.prototype.slice.call(arguments,2);o&&o.forEach(function(e){e.apply(null,r)})}var s={},a=0,u=function(){this.id=a++,o(this.id,"listeners",{}),this.on=r.bind(null,this.id),this.trigger=i.bind(null,this.id),this._reset=function(){o(this.id,"listeners",{})}};n.exports=u},{}],15:[function(e,n){n.exports={PluginApi:e("./PluginApi.js"),pluginHandler:e("./pluginHandler.js")}},{"./PluginApi.js":14,"./pluginHandler.js":16}],16:[function(e,n){var t=[];n.exports={register:function(e){if("function"!=typeof e)throw new Error("Plugin has to be a function");t.push(e)},initPlugins:function(e,n){if(!e)throw new Error("Expected a PluginApi instance");delete e._reset,Object.freeze&&Object.freeze(e),t.forEach(function(t){t(e,n||{})})},_reset:function(){t.length=0}}},{}],17:[function(e,n){function t(e,n){if(!n||"object"!=typeof n)return e;for(var t=Object.keys(n),o=t.length;o--;)e[t[o]]=n[t[o]];return e}n.exports=t},{}],18:[function(e,n){(function(t){"use strict";var o=e("cross-domain-events"),r={items:[],add:function(e){this.items.push(e)},getById:function(e){return this.items.filter(function(n){return n.id===e})[0]}},i=function(e,n){if("function"!=typeof t.postscribe)throw new Error("Gardr Postscribe plugin: window.postscribe is "+typeof t.postscribe+", expected function");e.iframe.remove(),t.postscribe(e.options.container,n?n:'<script src="'+e.options.url+'"></script>',e.options.postscribeOptions)},s=function(e){e.on("item:beforerender",function(e){e.options.postscribe===!0?setTimeout(function(){i(e)},0):r.add(e)}),o.on("plugin:postscribe",function(e){var n=r.getById(e.data.id);n&&i(n,e.data.html)})};n.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"cross-domain-events":19}],19:[function(e,n){n.exports=e(11)},{"C:\\Node\\gardr\\builder\\node_modules\\gardr-ext\\node_modules\\cross-domain-events\\lib\\xde.js":11,eventlistener:20}],20:[function(e,n){n.exports=e(13)},{"C:\\Node\\gardr\\builder\\node_modules\\gardr-ext\\node_modules\\eventlistener\\eventlistener.js":13}],21:[function(e,n){"use strict";function t(e){e.on("item:afterrender",function(e){var n=!!e.options.resizeHorizontal,t=!!e.options.resizeVertical,o=e.options.container,r=e.rendered,i=e.iframe,s=n?r.width:null,a=t?r.height:null;s&&(o.style.width=s+"px"),a&&(o.style.height=a+"px"),(s||a)&&i.resize(s,a)})}n.exports=t},{}]},{},[1])(1)});